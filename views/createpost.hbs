<div id = "wrapper1">

    {{> userheader username = username}}


    <!-- CREATE POSTS -->
    
    <p class="title">CREATE A POST</p><br>
    
    <div class="post">

            <form action = "/success" class = "createpost" id = "createpost" name = "create" method = "post">
                <div class="postdetails">

                    <p id = "subtitle">Please choose at least one category and upload at least one photo. Don't leave any fields blank.</p>
                    
                    <!-- ITEM NAME -->
                    <label for="itemname">Item Name</label><br>
                    <input type="text" id="itemname" name="itemname" maxlength=50 value={{title}}><br>
                    
                    <!-- DESCRIPTION -->
                    <label for="description">Description</label><br>
                    <textarea id = "description" name="description" placeholder="Enter a description of your item...">{{description}}</textarea><br>
                    
                    <!-- STARTING PRICE -->
                    <label for="sprice">Starting Price</label><br>
                    <input type="text" id="sprice" name="sprice" maxlength=7 placeholder="10.00" onkeypress="return isNumber(event)" value="{{startprice}}"><br>
                    
                    <!-- PRICE INCREMENT -->
                    <label for="priceinc">Price Increment</label><br>
                    <input type="text" id="priceinc" name="priceinc" maxlength=7 placeholder="10.00" onkeypress="return isNumber(event)" value="{{incrementprice}}"><br>
                    
                    <!-- STEAL PRICE -->
                    <label for="stealp">Steal Price</label><br>
                    <input type="text" id="stealprice" name="stealp" maxlength=7 placeholder="10.00" onkeypress="return isNumber(event)" value="{{stealprice}}"><br>
                    
                    <!-- CUT-OFF -->
                    <label for="cutoffdt">Cut-Off Date & Time</label><br>
                    <input type="datetime-local" id="cutoffdt" name="cutoffdt" value="{{cutoff}}"><br>
                    
                    <!-- MODE OF PAYMENT -->
                    <label for="modep">Mode of Payment</label><br>
                    <select name="modep">
                        <option value="Cash">Cash</option>
                        <option value="GCash">G-Cash</option>
                        <option value="Bank Transfer">Bank Transfer</option>
                        <option value="Paymaya">Paymaya</option>
                    </select><br>
                   
                    <!-- MEET-UP DETAILS -->
                    <label for="meetup">Meet-up Details</label><br>
                    <input type="text" id="meetup" name="meetup" value="{{details}}"><br>
                   
                    <!-- CATEGORIES -->
                    <label for="categ">Categories</label><br>
                    <select name="categ">
                        <option selected value="Book">Book</option>
                        <option value="For Pet">For Pet</option>
                        <option value="Women's">Women's</option>
                        <option value="Men's">Men's</option>
                        <option value="Children's">Children's</option>
                        <option value="Shoes">Shoes</option>
                        <option value="Stationery">Stationery</option>
                        <option value="Food">Food</option>
                        <option value="Collectible">Collectible</option>
                        <option value="Accessory">Accessory</option>
                        <option value="Technology">Technology</option>
                    </select><br>
                   
                    <!-- UPLOAD -->
                    <label for="pic">Upload Picture/s</label><br>
                    <input type="file" id = "pic" name="pic" accept="image/*" multiple><br>
                   
                    <!-- SUBMIT -->
                    <button type="submit" id = "submit" form="createpost" value="Submit" onclick = "create.submit()">Submit</button>
                </div>
            </form>
    </div>

<script type="text/javascript">
    function isNumber(evt)
    {
        var charCode = (evt.which) ? evt.which : event.keyCode
        if (charCode > 31 && (charCode < 48 || charCode > 57))
            return false;

        return true;
    }

    $("#submit").click(function() {

        var valid = true;

        // RESETS BACKGROUND COLOR OF FIELDS
        $("#itemname").css("background-color", "white");
        $("#description").css("background-color", "white");
        $("#sprice").css("background-color", "white");
        $("#priceinc").css("background-color", "white");
        $("#stealprice").css("background-color", "white");
        $("#cutoffdt").css("background-color", "white");
        $("#meetups").css("background-color", "white");
        $("#categ").css("color", "black");
        $("#pic").css("background-color", "white");

        if($.trim($("#itemname").val()) == "") // VALIDATION FOR ITEM NAME
        {
            $("#itemname").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($.trim($("#description").val()) == "") // VALIDATION FOR DESCRIPTION
        {
            $("#description").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($.trim($("#sprice").val()) == "") // VALIDATION FOR STARTING PRICE
        {
            $("#sprice").css("background-color", "lightcoral");
            valid = false;
        }

        if($.trim($("#priceinc").val()) == "") // VALIDATION FOR PRICE INCREMENT
        {
            $("#priceinc").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($.trim($("#stealprice").val()) == "") // VALIDATION FOR STEAL PRICE
        {
            $("#stealprice").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($.trim($("#cutoffdt").val()) == "") // MUST MODIFY
        {
            $("#cutoffdt").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($.trim($("#meetup").val()) == "") // VALIDATION FOR MEETUPS
        {
            $("#meetup").css("background-color", "lightcoral");
            valid = false;
        }
        
        if($(".categ:checked").length == 0) // VALIDATION FOR CATEGORIES
        {
            $("#categ").css("color", "lightcoral");
            categorychosen = false;
            valid = false;
        }
        
        if ($("#pic").val() == "") // VALIDATION FOR PIC UPLOAD
        {
            $("#pic").css("background-color", "lightcoral");
            picuploaded = false;
            valid = false;
        }

        if(!valid)
        {
            alert("Please fill in all the missing fields.");
            window.location.replace("/createpost");
        }

    });
    
</script>